{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/maya2/Desktop/Dev/Sites/Armazem-fit-store/site/afs-next-app/components/carousel/Carousel.jsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport bannerType from \"../../types/bannerType\";\nimport Banner from \"./Banner\";\nimport Dots from \"./Dots\";\nvar timeout;\nvar INTERVAL_MS = 9000;\n\nvar procuraProximoItemId = function procuraProximoItemId(itemsIds, itemId) {\n  var indexAtual = itemsIds.indexOf(itemId); // retornando o proximo se existir\n\n  return itemsIds[indexAtual + 1] || itemsIds[0];\n};\n\nvar Carousel = function Carousel(_ref) {\n  _s();\n\n  var banners = _ref.banners,\n      autoPlay = _ref.autoPlay,\n      showDots = _ref.showDots;\n\n  var _banners = _slicedToArray(banners, 1),\n      _idInicial = _banners[0]._id;\n\n  var _useState = useState(_idInicial),\n      bannerAtualId = _useState[0],\n      setBannerAtualId = _useState[1];\n\n  function changeBanner(bannerId) {\n    setBannerAtualId(bannerId);\n  }\n\n  var bannerAtual = banners.find(function (_ref2) {\n    var _id = _ref2._id;\n    return _id === bannerAtualId;\n  });\n\n  var trocaBanner = function trocaBanner() {\n    var proximoItemId = procuraProximoItemId(banners.map(function (_ref3) {\n      var _id = _ref3._id;\n      return _id;\n    }), bannerAtualId);\n    setBannerAtualId(proximoItemId);\n  };\n\n  useEffect(function () {\n    // usar setInterval aqui pode criar um cache nas variaveis\n    if (!autoPlay) return null;\n    timeout = setTimeout(function () {\n      return trocaBanner();\n    }, INTERVAL_MS);\n    return function () {\n      clearTimeout(timeout);\n    };\n  }, [bannerAtualId]);\n  return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, __jsx(Banner, {\n    banner: bannerAtual,\n    mostrarFolhas: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }), showDots ? __jsx(Dots, {\n    banners: banners,\n    bannerAtualId: bannerAtualId,\n    onClick: function onClick(bannerId) {\n      return changeBanner(bannerId);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }) : __jsx(React.Fragment, null));\n};\n\n_s(Carousel, \"GYEWL9rQDWB+Kn+v8dTVaqwUsa0=\");\n\n_c = Carousel;\nCarousel.propTypes = {\n  banners: PropTypes.arrayOf(bannerType).isRequired,\n  autoPlay: PropTypes.bool,\n  showDots: PropTypes.bool\n};\nCarousel.defaultProps = {\n  autoPlay: true,\n  showDots: false\n};\nexport default Carousel;\n\nvar _c;\n\n$RefreshReg$(_c, \"Carousel\");","map":{"version":3,"sources":["/Users/maya2/Desktop/Dev/Sites/Armazem-fit-store/site/afs-next-app/components/carousel/Carousel.jsx"],"names":["React","useState","useEffect","PropTypes","bannerType","Banner","Dots","timeout","INTERVAL_MS","procuraProximoItemId","itemsIds","itemId","indexAtual","indexOf","Carousel","banners","autoPlay","showDots","_idInicial","_id","bannerAtualId","setBannerAtualId","changeBanner","bannerId","bannerAtual","find","trocaBanner","proximoItemId","map","setTimeout","clearTimeout","propTypes","arrayOf","isRequired","bool","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport bannerType from \"../../types/bannerType\";\nimport Banner from \"./Banner\";\nimport Dots from \"./Dots\";\n\nlet timeout;\nconst INTERVAL_MS = 9000;\n\nconst procuraProximoItemId = (itemsIds, itemId) => {\n  const indexAtual = itemsIds.indexOf(itemId);\n  // retornando o proximo se existir\n  return itemsIds[indexAtual + 1] || itemsIds[0];\n};\n\nconst Carousel = ({ banners, autoPlay, showDots }) => {\n  const [{ _id: _idInicial }] = banners;\n  const [bannerAtualId, setBannerAtualId] = useState(_idInicial);\n\n  function changeBanner(bannerId) {\n    setBannerAtualId(bannerId);\n  }\n\n  const bannerAtual = banners.find(({ _id }) => _id === bannerAtualId);\n  const trocaBanner = () => {\n    const proximoItemId = procuraProximoItemId(\n      banners.map(({ _id }) => _id),\n      bannerAtualId\n    );\n    setBannerAtualId(proximoItemId);\n  };\n\n  useEffect(() => {\n    // usar setInterval aqui pode criar um cache nas variaveis\n    if (!autoPlay) return null;\n    timeout = setTimeout(() => trocaBanner(), INTERVAL_MS);\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [bannerAtualId]);\n\n  return (\n    <div>\n      <Banner banner={bannerAtual} mostrarFolhas />\n      {showDots ? (\n        <Dots\n          banners={banners}\n          bannerAtualId={bannerAtualId}\n          onClick={bannerId => changeBanner(bannerId)}\n        />\n      ) : (\n        <></>\n      )}\n    </div>\n  );\n};\nCarousel.propTypes = {\n  banners: PropTypes.arrayOf(bannerType).isRequired,\n  autoPlay: PropTypes.bool,\n  showDots: PropTypes.bool\n};\n\nCarousel.defaultProps = {\n  autoPlay: true,\n  showDots: false\n};\n\nexport default Carousel;\n"]},"metadata":{},"sourceType":"module"}