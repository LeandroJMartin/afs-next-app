{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _templateObject,\n    _templateObject2,\n    _templateObject3,\n    _templateObject4,\n    _this = this,\n    _jsxFileName = \"/Users/maya2/Desktop/Dev/Sites/Armazem-fit-store/site/afs-next-app/components/vip/FaixaCadastro.jsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/* eslint-disable consistent-return */\nimport { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport Router from \"next/router\";\nimport { getAbsoluteUrl } from \"../../helpers/url\";\nimport Container from \"../ui/containers/Container\";\nimport Input from \"../formulario/Input\";\nimport InputMasked from \"../formulario/InputMasked\";\nimport ButtonSucesso from \"../ui/buttons/ButtonSucesso\";\nimport CircleLoading from \"../ui/loadings/Circle\";\nimport { scrollToElement } from \"../../helpers/window\";\nimport { celularMask } from \"../../helpers/masks\";\nimport { validacao } from \"../../helpers/formularioVip\";\nimport PropTypes from \"prop-types\";\nvar Faixa = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  min-height: 4rem;\\n  padding: 2rem 0;\\n  background: \", \";\\n\\n  color: white;\\n\"])), function (props) {\n  return props.theme.client.colors.verdeEscuro;\n});\n_c = Faixa;\nvar Conteudo = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  /* display: grid;\\n  grid-gap: 1rem;\\n  grid-template-columns: repeat(auto-fit, minmax(30rem, 1fr)); */\\n\\n  display: flex;\\n  justify-content: space-between;\\n\\n  .loading-wrapper {\\n    align-self: center;\\n    justify-self: center;\\n  }\\n  .feedback {\\n    font-size: 1.8rem;\\n    font-weight: 500;\\n    justify-self: center;\\n  }\\n\\n  @media (max-width: 1030px) {\\n    flex-direction: column;\\n    align-items: center;\\n  }\\n\"])));\n_c2 = Conteudo;\nvar Call = styled.div(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  p {\\n    font-size: 1.8rem;\\n    margin-left: 1rem;\\n    text-align: center;\\n    max-width: 30rem;\\n    width: 100%;\\n  }\\n\\n  @media (max-width: 1030px) {\\n    margin-bottom: 2rem;\\n  }\\n\"])));\n_c3 = Call;\nvar Form = styled.form(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  max-width: 70rem;\\n  width: 100%;\\n  justify-content: space-between;\\n\\n  .inputs {\\n    justify-content: space-between;\\n    display: flex;\\n    width: 100%;\\n    margin: 0 2rem;\\n\\n    @media (max-width: 550px) {\\n      flex-direction: column;\\n      align-items: center;\\n\\n      div {\\n        margin: 1rem 0;\\n      }\\n    }\\n  }\\n  .cadastro-vip-input {\\n    max-width: 16rem;\\n  }\\n\\n  @media \", \" {\\n    flex-direction: column;\\n    \", \" {\\n      margin-top: 2rem;\\n    }\\n  }\\n\"])), function (props) {\n  return props.theme.devices.tablet;\n}, ButtonSucesso);\n_c4 = Form;\n\nvar FaixaCadastro = function FaixaCadastro(_ref) {\n  _s();\n\n  var unidade = _ref.unidade;\n\n  var _useState = useState({\n    nome: \"\",\n    email: \"\",\n    celular: \"\",\n    url: \"\"\n  }),\n      lead = _useState[0],\n      setLead = _useState[1];\n\n  var _useState2 = useState(\"blank\"),\n      status = _useState2[0],\n      setStatus = _useState2[1];\n\n  var _useState3 = useState(true),\n      validado = _useState3[0],\n      setValidado = _useState3[1];\n\n  var enviaLead = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(leadData) {\n      var validou, integracaoRdStation, integracao;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              validou = validacao(leadData);\n\n              if (validou) {\n                _context3.next = 4;\n                break;\n              }\n\n              setValidado(false);\n              return _context3.abrupt(\"return\", false);\n\n            case 4:\n              _context3.prev = 4;\n              setStatus(\"enviando\");\n              _context3.next = 8;\n              return fetch(\"\".concat(getAbsoluteUrl(\"front\"), \"/api/fidelidade/criar\"), {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(_objectSpread({}, leadData))\n              });\n\n            case 8:\n              _context3.next = 10;\n              return _context3.sent.json();\n\n            case 10:\n              setStatus(\"enviado\");\n              /*Integração RD Station*/\n\n              integracaoRdStation = /*#__PURE__*/function () {\n                var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          _context.next = 2;\n                          return fetch(\"https://www.rdstation.com.br/api/1.3/conversions\", {\n                            method: \"POST\",\n                            headers: {\n                              \"Content-Type\": \"application/json\"\n                            },\n                            body: JSON.stringify({\n                              token_rdstation: \"3081eac95f9628db57a9ffcc563b2a30\",\n                              identificador: \"Lista-Vip\",\n                              email: lead.email,\n                              nome: lead.nome,\n                              celular: lead.celular,\n                              url: lead.url,\n                              unidade: unidade || \"\"\n                            })\n                          });\n\n                        case 2:\n                          return _context.abrupt(\"return\", _context.sent);\n\n                        case 3:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function integracaoRdStation() {\n                  return _ref3.apply(this, arguments);\n                };\n              }();\n\n              integracao = /*#__PURE__*/function () {\n                var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          _context2.next = 2;\n                          return integracaoRdStation();\n\n                        case 2:\n                          return _context2.abrupt(\"return\", _context2.sent);\n\n                        case 3:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                }));\n\n                return function integracao() {\n                  return _ref4.apply(this, arguments);\n                };\n              }();\n\n              integracao(); // fazendo redir\n\n              setTimeout(function () {\n                window.sessionStorage.setItem(\"ListaVipPreenchida\", true);\n                Router.push(\"/lista-vip\");\n              }, 2000);\n              _context3.next = 20;\n              break;\n\n            case 17:\n              _context3.prev = 17;\n              _context3.t0 = _context3[\"catch\"](4);\n              setStatus(\"erro\");\n\n            case 20:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[4, 17]]);\n    }));\n\n    return function enviaLead(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleInput = function handleInput(_ref5) {\n    var _ref5$currentTarget = _ref5.currentTarget,\n        value = _ref5$currentTarget.value,\n        name = _ref5$currentTarget.name;\n    setLead(_objectSpread(_objectSpread({}, lead), {}, _defineProperty({}, name, value)));\n  };\n\n  useEffect(function () {\n    // identifica se existe um submit get do form AMP -- users vindo das AMPs\n    var urlParams = new URLSearchParams(window.location.search);\n    var _ref6 = [urlParams.get(\"nome\"), urlParams.get(\"email\")],\n        nome = _ref6[0],\n        email = _ref6[1];\n\n    if (nome && email) {\n      // removendo parametros da url\n      scrollToElement(\".faixa-fidelidade\");\n      window.history.replaceState(null, null, window.location.pathname);\n      enviaLead({\n        nome: nome,\n        email: email\n      });\n    }\n  }, [\"once\"]);\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e) {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              e.preventDefault();\n              lead.url = window.location.pathname;\n              enviaLead(lead);\n\n            case 3:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function handleSubmit(_x2) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Faixa, {\n    className: \"faixa-fidelidade\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 5\n    }\n  }, __jsx(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }\n  }, __jsx(Conteudo, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }\n  }, __jsx(Call, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 11\n    }\n  }, __jsx(\"picture\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }\n  }, __jsx(\"source\", {\n    type: \"image/webp\",\n    srcSet: \"/static/img/vip.webp\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 15\n    }\n  }), __jsx(\"source\", {\n    type: \"image/png\",\n    srcSet: \"/static/img/vip.png\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 15\n    }\n  }), __jsx(\"img\", {\n    alt: \"Programa Fidelidade\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 15\n    }\n  })), __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }\n  }, \"Cadastre-se para participar do nosso programa fidelidade e receber descontos exclusivos!\")), status === \"blank\" && __jsx(Form, {\n    onSubmit: handleSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"inputs\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 15\n    }\n  }, __jsx(Input, {\n    nome: \"nome\",\n    placeholder: \"Seu nome\",\n    handleInput: handleInput,\n    valor: lead.nome,\n    valido: validado,\n    className: \"cadastro-vip-input\",\n    tipo: \"text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 17\n    }\n  }), __jsx(Input, {\n    nome: \"email\",\n    placeholder: \"Seu E-mail\",\n    handleInput: handleInput,\n    valor: lead.email,\n    valido: validado,\n    className: \"cadastro-vip-input\",\n    tipo: \"email\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 17\n    }\n  }), __jsx(InputMasked, {\n    nome: \"celular\",\n    valor: lead.celular,\n    handleInput: handleInput,\n    placeholder: \"Celular/Whatsapp\",\n    valido: validado,\n    tipo: \"text\",\n    mask: celularMask,\n    className: \"cadastro-vip-input\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 17\n    }\n  })), __jsx(ButtonSucesso, {\n    type: \"submit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 15\n    }\n  }, \"Cadastrar\")), status === \"enviando\" && __jsx(\"div\", {\n    className: \"loading-wrapper\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 13\n    }\n  }, __jsx(CircleLoading, {\n    corCliente: \"laranja\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 15\n    }\n  })), status === \"enviado\" && __jsx(\"span\", {\n    className: \"feedback\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 13\n    }\n  }, \"Obrigado. Aguarde novidades no seu e-mail!\"), status === \"erro\" && __jsx(\"span\", {\n    className: \"feedback\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 13\n    }\n  }, \"Ops, algo deu errado! Tente novamente mais tarde.\"))));\n};\n\n_s(FaixaCadastro, \"0Tyt4178GaFtFENNTDNhm75Ix5c=\");\n\n_c5 = FaixaCadastro;\nFaixaCadastro.propTypes = {\n  unidade: PropTypes.string\n};\nexport default FaixaCadastro;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"Faixa\");\n$RefreshReg$(_c2, \"Conteudo\");\n$RefreshReg$(_c3, \"Call\");\n$RefreshReg$(_c4, \"Form\");\n$RefreshReg$(_c5, \"FaixaCadastro\");","map":{"version":3,"sources":["/Users/maya2/Desktop/Dev/Sites/Armazem-fit-store/site/afs-next-app/components/vip/FaixaCadastro.jsx"],"names":["useState","useEffect","styled","Router","getAbsoluteUrl","Container","Input","InputMasked","ButtonSucesso","CircleLoading","scrollToElement","celularMask","validacao","PropTypes","Faixa","div","props","theme","client","colors","verdeEscuro","Conteudo","Call","Form","form","devices","tablet","FaixaCadastro","unidade","nome","email","celular","url","lead","setLead","status","setStatus","validado","setValidado","enviaLead","leadData","validou","fetch","method","headers","body","JSON","stringify","json","integracaoRdStation","token_rdstation","identificador","integracao","setTimeout","window","sessionStorage","setItem","push","handleInput","currentTarget","value","name","urlParams","URLSearchParams","location","search","get","history","replaceState","pathname","handleSubmit","e","preventDefault","propTypes","string"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,SAASC,cAAT,QAA+B,mBAA/B;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAOC,aAAP,MAA0B,6BAA1B;AACA,OAAOC,aAAP,MAA0B,uBAA1B;AACA,SAASC,eAAT,QAAgC,sBAAhC;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,SAASC,SAAT,QAA0B,6BAA1B;AAEA,OAAOC,SAAP,MAAsB,YAAtB;AAEA,IAAMC,KAAK,GAAGZ,MAAM,CAACa,GAAV,yJAGK,UAAAC,KAAK;AAAA,SAAIA,KAAK,CAACC,KAAN,CAAYC,MAAZ,CAAmBC,MAAnB,CAA0BC,WAA9B;AAAA,CAHV,CAAX;KAAMN,K;AAQN,IAAMO,QAAQ,GAAGnB,MAAM,CAACa,GAAV,wfAAd;MAAMM,Q;AAwBN,IAAMC,IAAI,GAAGpB,MAAM,CAACa,GAAV,kTAAV;MAAMO,I;AAgBN,IAAMC,IAAI,GAAGrB,MAAM,CAACsB,IAAV,4lBA0BC,UAAAR,KAAK;AAAA,SAAIA,KAAK,CAACC,KAAN,CAAYQ,OAAZ,CAAoBC,MAAxB;AAAA,CA1BN,EA4BJlB,aA5BI,CAAV;MAAMe,I;;AAkCN,IAAMI,aAAa,GAAG,SAAhBA,aAAgB,OAAiB;AAAA;;AAAA,MAAdC,OAAc,QAAdA,OAAc;;AACrC,kBAAwB5B,QAAQ,CAAC;AAC/B6B,IAAAA,IAAI,EAAE,EADyB;AAE/BC,IAAAA,KAAK,EAAE,EAFwB;AAG/BC,IAAAA,OAAO,EAAE,EAHsB;AAI/BC,IAAAA,GAAG,EAAE;AAJ0B,GAAD,CAAhC;AAAA,MAAOC,IAAP;AAAA,MAAaC,OAAb;;AAMA,mBAA4BlC,QAAQ,CAAC,OAAD,CAApC;AAAA,MAAOmC,MAAP;AAAA,MAAeC,SAAf;;AAEA,mBAAgCpC,QAAQ,CAAC,IAAD,CAAxC;AAAA,MAAOqC,QAAP;AAAA,MAAiBC,WAAjB;;AAEA,MAAMC,SAAS;AAAA,yEAAG,kBAAMC,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACVC,cAAAA,OADU,GACA7B,SAAS,CAAC4B,QAAD,CADT;;AAAA,kBAGXC,OAHW;AAAA;AAAA;AAAA;;AAIdH,cAAAA,WAAW,CAAC,KAAD,CAAX;AAJc,gDAKP,KALO;;AAAA;AAAA;AASdF,cAAAA,SAAS,CAAC,UAAD,CAAT;AATc;AAAA,qBAUDM,KAAK,WAAItC,cAAc,CAAC,OAAD,CAAlB,4BAAoD;AACpEuC,gBAAAA,MAAM,EAAE,MAD4D;AAEpEC,gBAAAA,OAAO,EAAE;AACP,kCAAgB;AADT,iBAF2D;AAKpEC,gBAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,mBACDP,QADC;AAL8D,eAApD,CAVJ;;AAAA;AAAA;AAAA,oCAkBVQ,IAlBU;;AAAA;AAmBdZ,cAAAA,SAAS,CAAC,SAAD,CAAT;AAEA;;AACMa,cAAAA,mBAtBQ;AAAA,qFAsBc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCACbP,KAAK,CAAC,kDAAD,EAAqD;AACrEC,4BAAAA,MAAM,EAAE,MAD6D;AAErEC,4BAAAA,OAAO,EAAE;AACP,8CAAgB;AADT,6BAF4D;AAKrEC,4BAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBG,8BAAAA,eAAe,EAAE,kCADE;AAEnBC,8BAAAA,aAAa,EAAE,WAFI;AAGnBrB,8BAAAA,KAAK,EAAEG,IAAI,CAACH,KAHO;AAInBD,8BAAAA,IAAI,EAAEI,IAAI,CAACJ,IAJQ;AAKnBE,8BAAAA,OAAO,EAAEE,IAAI,CAACF,OALK;AAMnBC,8BAAAA,GAAG,EAAEC,IAAI,CAACD,GANS;AAOnBJ,8BAAAA,OAAO,EAAEA,OAAO,IAAI;AAPD,6BAAf;AAL+D,2BAArD,CADQ;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAtBd;;AAAA,gCAsBRqB,mBAtBQ;AAAA;AAAA;AAAA;;AAwCRG,cAAAA,UAxCQ;AAAA,qFAwCK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCACJH,mBAAmB,EADf;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAxCL;;AAAA,gCAwCRG,UAxCQ;AAAA;AAAA;AAAA;;AA2CdA,cAAAA,UAAU,GA3CI,CA6Cd;;AACAC,cAAAA,UAAU,CAAC,YAAM;AACfC,gBAAAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,oBAA9B,EAAoD,IAApD;AAEArD,gBAAAA,MAAM,CAACsD,IAAP,CAAY,YAAZ;AACD,eAJS,EAIP,IAJO,CAAV;AA9Cc;AAAA;;AAAA;AAAA;AAAA;AAoDdrB,cAAAA,SAAS,CAAC,MAAD,CAAT;;AApDc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAATG,SAAS;AAAA;AAAA;AAAA,KAAf;;AAwDA,MAAMmB,WAAW,GAAG,SAAdA,WAAc,QAAwC;AAAA,oCAArCC,aAAqC;AAAA,QAApBC,KAAoB,uBAApBA,KAAoB;AAAA,QAAbC,IAAa,uBAAbA,IAAa;AAC1D3B,IAAAA,OAAO,iCAAMD,IAAN,2BAAa4B,IAAb,EAAoBD,KAApB,GAAP;AACD,GAFD;;AAIA3D,EAAAA,SAAS,CAAC,YAAM;AACd;AACA,QAAM6D,SAAS,GAAG,IAAIC,eAAJ,CAAoBT,MAAM,CAACU,QAAP,CAAgBC,MAApC,CAAlB;AACA,gBAAsB,CAACH,SAAS,CAACI,GAAV,CAAc,MAAd,CAAD,EAAwBJ,SAAS,CAACI,GAAV,CAAc,OAAd,CAAxB,CAAtB;AAAA,QAAOrC,IAAP;AAAA,QAAaC,KAAb;;AACA,QAAID,IAAI,IAAIC,KAAZ,EAAmB;AACjB;AACApB,MAAAA,eAAe,CAAC,mBAAD,CAAf;AACA4C,MAAAA,MAAM,CAACa,OAAP,CAAeC,YAAf,CAA4B,IAA5B,EAAkC,IAAlC,EAAwCd,MAAM,CAACU,QAAP,CAAgBK,QAAxD;AACA9B,MAAAA,SAAS,CAAC;AACRV,QAAAA,IAAI,EAAJA,IADQ;AAERC,QAAAA,KAAK,EAALA;AAFQ,OAAD,CAAT;AAID;AACF,GAbQ,EAaN,CAAC,MAAD,CAbM,CAAT;;AAeA,MAAMwC,YAAY;AAAA,yEAAG,kBAAMC,CAAN;AAAA;AAAA;AAAA;AAAA;AACnBA,cAAAA,CAAC,CAACC,cAAF;AACAvC,cAAAA,IAAI,CAACD,GAAL,GAAWsB,MAAM,CAACU,QAAP,CAAgBK,QAA3B;AACA9B,cAAAA,SAAS,CAACN,IAAD,CAAT;;AAHmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZqC,YAAY;AAAA;AAAA;AAAA,KAAlB;;AAMA,SACE,MAAC,KAAD;AAAO,IAAA,SAAS,EAAC,kBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAQ,IAAA,IAAI,EAAC,YAAb;AAA0B,IAAA,MAAM,EAAC,sBAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAQ,IAAA,IAAI,EAAC,WAAb;AAAyB,IAAA,MAAM,EAAC,qBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAGE;AAAK,IAAA,GAAG,EAAC,qBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,CADF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gGANF,CADF,EAYGnC,MAAM,KAAK,OAAX,IACC,MAAC,IAAD;AAAM,IAAA,QAAQ,EAAEmC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,UAFd;AAGE,IAAA,WAAW,EAAEZ,WAHf;AAIE,IAAA,KAAK,EAAEzB,IAAI,CAACJ,IAJd;AAKE,IAAA,MAAM,EAAEQ,QALV;AAME,IAAA,SAAS,EAAC,oBANZ;AAOE,IAAA,IAAI,EAAC,MAPP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAUE,MAAC,KAAD;AACE,IAAA,IAAI,EAAC,OADP;AAEE,IAAA,WAAW,EAAC,YAFd;AAGE,IAAA,WAAW,EAAEqB,WAHf;AAIE,IAAA,KAAK,EAAEzB,IAAI,CAACH,KAJd;AAKE,IAAA,MAAM,EAAEO,QALV;AAME,IAAA,SAAS,EAAC,oBANZ;AAOE,IAAA,IAAI,EAAC,OAPP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVF,EAmBE,MAAC,WAAD;AACE,IAAA,IAAI,EAAC,SADP;AAEE,IAAA,KAAK,EAAEJ,IAAI,CAACF,OAFd;AAGE,IAAA,WAAW,EAAE2B,WAHf;AAIE,IAAA,WAAW,EAAC,kBAJd;AAKE,IAAA,MAAM,EAAErB,QALV;AAME,IAAA,IAAI,EAAC,MANP;AAOE,IAAA,IAAI,EAAE1B,WAPR;AAQE,IAAA,SAAS,EAAC,oBARZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAnBF,CADF,EA+BE,MAAC,aAAD;AAAe,IAAA,IAAI,EAAC,QAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBA/BF,CAbJ,EA+CGwB,MAAM,KAAK,UAAX,IACC;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,aAAD;AAAe,IAAA,UAAU,EAAC,SAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAhDJ,EAoDGA,MAAM,KAAK,SAAX,IACC;AAAM,IAAA,SAAS,EAAC,UAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDArDJ,EAyDGA,MAAM,KAAK,MAAX,IACC;AAAM,IAAA,SAAS,EAAC,UAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yDA1DJ,CADF,CADF,CADF;AAqED,CAjKD;;GAAMR,a;;MAAAA,a;AAmKNA,aAAa,CAAC8C,SAAd,GAA0B;AACxB7C,EAAAA,OAAO,EAAEf,SAAS,CAAC6D;AADK,CAA1B;AAIA,eAAe/C,aAAf","sourcesContent":["/* eslint-disable consistent-return */\nimport { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport Router from \"next/router\";\nimport { getAbsoluteUrl } from \"../../helpers/url\";\nimport Container from \"../ui/containers/Container\";\nimport Input from \"../formulario/Input\";\nimport InputMasked from \"../formulario/InputMasked\";\nimport ButtonSucesso from \"../ui/buttons/ButtonSucesso\";\nimport CircleLoading from \"../ui/loadings/Circle\";\nimport { scrollToElement } from \"../../helpers/window\";\nimport { celularMask } from \"../../helpers/masks\";\nimport { validacao } from \"../../helpers/formularioVip\";\n\nimport PropTypes from \"prop-types\";\n\nconst Faixa = styled.div`\n  min-height: 4rem;\n  padding: 2rem 0;\n  background: ${props => props.theme.client.colors.verdeEscuro};\n\n  color: white;\n`;\n\nconst Conteudo = styled.div`\n  /* display: grid;\n  grid-gap: 1rem;\n  grid-template-columns: repeat(auto-fit, minmax(30rem, 1fr)); */\n\n  display: flex;\n  justify-content: space-between;\n\n  .loading-wrapper {\n    align-self: center;\n    justify-self: center;\n  }\n  .feedback {\n    font-size: 1.8rem;\n    font-weight: 500;\n    justify-self: center;\n  }\n\n  @media (max-width: 1030px) {\n    flex-direction: column;\n    align-items: center;\n  }\n`;\n\nconst Call = styled.div`\n  display: flex;\n  align-items: center;\n  p {\n    font-size: 1.8rem;\n    margin-left: 1rem;\n    text-align: center;\n    max-width: 30rem;\n    width: 100%;\n  }\n\n  @media (max-width: 1030px) {\n    margin-bottom: 2rem;\n  }\n`;\n\nconst Form = styled.form`\n  display: flex;\n  align-items: center;\n  max-width: 70rem;\n  width: 100%;\n  justify-content: space-between;\n\n  .inputs {\n    justify-content: space-between;\n    display: flex;\n    width: 100%;\n    margin: 0 2rem;\n\n    @media (max-width: 550px) {\n      flex-direction: column;\n      align-items: center;\n\n      div {\n        margin: 1rem 0;\n      }\n    }\n  }\n  .cadastro-vip-input {\n    max-width: 16rem;\n  }\n\n  @media ${props => props.theme.devices.tablet} {\n    flex-direction: column;\n    ${ButtonSucesso} {\n      margin-top: 2rem;\n    }\n  }\n`;\n\nconst FaixaCadastro = ({ unidade }) => {\n  const [lead, setLead] = useState({\n    nome: \"\",\n    email: \"\",\n    celular: \"\",\n    url: \"\"\n  });\n  const [status, setStatus] = useState(\"blank\");\n\n  const [validado, setValidado] = useState(true);\n\n  const enviaLead = async leadData => {\n    const validou = validacao(leadData);\n\n    if (!validou) {\n      setValidado(false);\n      return false;\n    }\n\n    try {\n      setStatus(\"enviando\");\n      await (await fetch(`${getAbsoluteUrl(\"front\")}/api/fidelidade/criar`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          ...leadData\n        })\n      })).json();\n      setStatus(\"enviado\");\n\n      /*Integração RD Station*/\n      const integracaoRdStation = async () => {\n        return await fetch(\"https://www.rdstation.com.br/api/1.3/conversions\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            token_rdstation: \"3081eac95f9628db57a9ffcc563b2a30\",\n            identificador: \"Lista-Vip\",\n            email: lead.email,\n            nome: lead.nome,\n            celular: lead.celular,\n            url: lead.url,\n            unidade: unidade || \"\"\n          })\n        });\n      };\n\n      const integracao = async () => {\n        return await integracaoRdStation();\n      };\n      integracao();\n\n      // fazendo redir\n      setTimeout(() => {\n        window.sessionStorage.setItem(\"ListaVipPreenchida\", true);\n\n        Router.push(\"/lista-vip\");\n      }, 2000);\n    } catch (error) {\n      setStatus(\"erro\");\n    }\n  };\n\n  const handleInput = ({ currentTarget: { value, name } }) => {\n    setLead({ ...lead, [name]: value });\n  };\n\n  useEffect(() => {\n    // identifica se existe um submit get do form AMP -- users vindo das AMPs\n    const urlParams = new URLSearchParams(window.location.search);\n    const [nome, email] = [urlParams.get(\"nome\"), urlParams.get(\"email\")];\n    if (nome && email) {\n      // removendo parametros da url\n      scrollToElement(\".faixa-fidelidade\");\n      window.history.replaceState(null, null, window.location.pathname);\n      enviaLead({\n        nome,\n        email\n      });\n    }\n  }, [\"once\"]);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    lead.url = window.location.pathname;\n    enviaLead(lead);\n  };\n\n  return (\n    <Faixa className=\"faixa-fidelidade\">\n      <Container>\n        <Conteudo>\n          <Call>\n            <picture>\n              <source type=\"image/webp\" srcSet=\"/static/img/vip.webp\" />\n              <source type=\"image/png\" srcSet=\"/static/img/vip.png\" />\n              <img alt=\"Programa Fidelidade\" />\n            </picture>\n            <p>\n              Cadastre-se para participar do nosso programa fidelidade e receber\n              descontos exclusivos!\n            </p>\n          </Call>\n          {status === \"blank\" && (\n            <Form onSubmit={handleSubmit}>\n              <div className=\"inputs\">\n                <Input\n                  nome=\"nome\"\n                  placeholder=\"Seu nome\"\n                  handleInput={handleInput}\n                  valor={lead.nome}\n                  valido={validado}\n                  className=\"cadastro-vip-input\"\n                  tipo=\"text\"\n                />\n                <Input\n                  nome=\"email\"\n                  placeholder=\"Seu E-mail\"\n                  handleInput={handleInput}\n                  valor={lead.email}\n                  valido={validado}\n                  className=\"cadastro-vip-input\"\n                  tipo=\"email\"\n                />\n                <InputMasked\n                  nome=\"celular\"\n                  valor={lead.celular}\n                  handleInput={handleInput}\n                  placeholder=\"Celular/Whatsapp\"\n                  valido={validado}\n                  tipo=\"text\"\n                  mask={celularMask}\n                  className=\"cadastro-vip-input\"\n                />\n              </div>\n              <ButtonSucesso type=\"submit\">Cadastrar</ButtonSucesso>\n            </Form>\n          )}\n          {status === \"enviando\" && (\n            <div className=\"loading-wrapper\">\n              <CircleLoading corCliente=\"laranja\" />\n            </div>\n          )}\n          {status === \"enviado\" && (\n            <span className=\"feedback\">\n              Obrigado. Aguarde novidades no seu e-mail!\n            </span>\n          )}\n          {status === \"erro\" && (\n            <span className=\"feedback\">\n              Ops, algo deu errado! Tente novamente mais tarde.\n            </span>\n          )}\n        </Conteudo>\n      </Container>\n    </Faixa>\n  );\n};\n\nFaixaCadastro.propTypes = {\n  unidade: PropTypes.string\n};\n\nexport default FaixaCadastro;\n"]},"metadata":{},"sourceType":"module"}